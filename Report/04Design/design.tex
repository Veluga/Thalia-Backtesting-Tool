\documentclass[main.tex]{subfiles}
\include{preamble.tex}

\begin{document}

\section{Design}

\subsection{Data Segregation}

The decision was made early on to horizontally partition the data store by Thalia into two parts. One consisting of data related to users and user accounts and the other of financial data related to asset classes, assets and their historical prices. The following is the list of reasons the team documented for this decision:

\begin{itemize}

\item One alternative revenue stream we identified early on was the sale of our financial data as a separate product. This process would be trivially easy if it was stored in a separate database. 
\item Although the security of both types of data is important to our business model, protecting userâ€™s private information is the highest priority. The financial data is accessed by the data harvester, a separate program gathering data from many sources on the web and introducing additional security risks. Data segregation is helps limit the scope of a potential data breach. \cite{ciscoSeg}
\item The two types of data serve two separate purposes. The modules responsible for managing each are also decoupled. Thus, separation helps to enforce the principle of least concern.
\item A large corpus of guides and examples on how to manage user accounts is available online. Extending any of these to include financial data might be difficult, and risks leading to bad design.

\end{itemize}

The separation of dissimilar collections of data is a practice widely adopted in industry. Criteria for assessing when this approach is appropriate have also been documented. \cite{dataSegImp} Based on the decision to use SQLite as our DBMS and to maximize the portability and security of the financial data, we decided to implement this decision by using two seperate databases.

\subsection{The Data Layer Module (Finda)}

The Finda module was designed to implement the data layer, acting as an intermediary between the data harvester/business logic and the financial data. It allows users to manage a number of databases implementing a common schema and give them access to a suite of tools for reading, writing, and removing the data stored in each. In addition to this the Finda module implements the following features:

A system for managing user permissions to help reinforce separation of responsibilities among Thalia's other modules. 
Integrity checks to ensure the integrity of the data provided to the end user. 
A suite of administrative features to aid with managing the application back end

Finda's design was modeled after object relational mappers (ORMs), libraries offered by most popular web frameworks the use of which was prohibited by the project constraints. Although the implementation of what is essentially our own ORM proved to be costly in terms of developer time, it allowed us to create a more focused module tailored to our requirements. This helped to streamline the development of other modules.

\subsection{The Data Analysis Module (Anda)}

The Anda module is an in-house library for handling all of the financial calculations. It was designed to have as simple an API as possible, in the interests of reducing cognitive workload when integrating it with the rest of the project. It allows the caller to define some invesment strategy (eg with an initial investment of \$3000, invest 60\% in S\&P500 and 40\% in Apple between 2000 and 2013, rebalancing annually) and provides a handful of functions, each of which produces a specific metric of the strategy's performance. The currently provided metrics are total return, maximum drawdown, best \& worst year, and sharpe \& sortino ratio, but the library is open for extension if we decide to add more.

Some of the public functions make use of repeated calculations. But to reduce coupling between components we accepted the performance hit.

\end{document}